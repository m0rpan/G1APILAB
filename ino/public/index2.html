<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Document</title>
</head>
    <body>

        <img src="" id="funnyguy" width="480"/><br>
        <script>
            console.log("Logo");
    
            catchFunnyguy()
            .then(response => {
                console.log('Here is the logo');
            })
            .catch(error => {
                console.log('error');
                console.error(error);
            });
    
            async function catchFunnyguy() {
                const response = await fetch('logo.png');
                const blob = await response.blob();
                document.getElementById('funnyguy').src = URL.createObjectURL(blob);
    
            }
        </script>

        <a href="/index.html"><button type="button" >Plant Names</button></a>
        <a href="/index2.html"><button type="button" >Genus</button></a>
        <a href="/prototype.html"><button type="button" >Plant location</button></a>

        <h1>This is all the plants on the API</h1>
        <input type="text" id="EnterPlantNameID"/> <button type="button" id="buttonID">enter</button>
        <span id = "all"></span> 
        
     <script>

getAllData();

async function getAllData(){
        const response = await fetch(`api/`)
        let dataToShow = await response.json();
        console.log(dataToShow.data);

        document.getElementById("all").textContent = dataToShow;

    var justButton = document.getElementById("buttonID");
    justButton.onclick = async function(){
        var plantSearch = document.getElementById("EnterPlantNameID").value;
        const response = await fetch(`search?searchText=${plantSearch}`);
        const data = await response.json();
        dataToShow = data.data;
        let listContainer = document.getElementById('listContainer');
        listContainer.innerHTML = "";
        console.log(dataToShow);
        
        for (i = 0; i < dataToShow.length; i++) {
            var li = document.createElement("li");
            li.appendChild(document.createTextNode(dataToShow[i]['genus']));
            listContainer.appendChild(li);
        
}
        
    };

myPlantData = dataToShow.data;
var ul = document.createElement("ul");
ul.setAttribute('id', 'listContainer');

for (var i = 0; i < myPlantData.length; i++) {
            var li = document.createElement("li");
            li.appendChild(document.createTextNode(myPlantData[i]['common_name']));
            ul.appendChild(li);
}


document.getElementById("all").appendChild(ul);

};


    </script>
    </body>
</html>
